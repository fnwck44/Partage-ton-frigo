{% extends "squelette.html" %}

{% block head %}
<link href="{{ url_for('static', filename='css/font-awesome.min.css') }}" rel="stylesheet">
<link href="{{ url_for('static', filename='css/form.css') }}" rel="stylesheet" type="text/css">
{% endblock %}

{% block corps %}
<div class="main">
    <img id="load" src="{{ url_for('static', filename='img/load.svg') }}" style="position:fixed; width:20%; left:40%; top:30%; visibility:hidden;">
    <div class="param">
        <h2>Ajouter un produit</h2>
        <br>
        <form action="" class="form" enctype=multipart/form-data id="window" method="post">
            <label for="POST-name">Vous êtes :</label>
            <div class="container"></div>
            <input id="POST-name" maxlength="40" name="nom" placeholder="Nom Prénom" type="text">
            <br><br>
            <label for="POST-title">Produit ajouté :</label>
            <input id="POST-title" maxlength="40" name="titre" placeholder="titre" type="text">
            <br><br>
            <label for="POST-cat">Catégorie : </label>
            <span class="break"></span>
            <select class="select" id="POST-cat" name="frais" type="text">
                <option value="frais">frais</option>
                <option value="sec">sec</option>
            </select>
            <br><br>
            <label for="dlc">A consommer : </label>
            <span class="break"></span>
            <select class="select" id="dlc-type" name="dlc">
                <option value="avant le">avant le</option>
                <option value="de préférence avant le">de préférence avant le</option>
                <input class="dlc" id="dlc" name="peremption" type="date">

                <br><br>
                <label for="POST-description">Description:</label>
                <textarea id="POST-description" maxlength="150" name="desc" placeholder="facultatif, 150 caractères max"
                          type="text"></textarea>
                <br><br>

                <label for="POST-qty">Quantité :</label>

                <input id="POST-qty" min="1" name="quantity" type="number" value="1">

                <br><br>


                <label>Photo :</label><span class="astuce">
                Astuce : Prenez en photo le code barre !
            </span>
                <label> </label>
                <br><br>

                <img src="{{ url_for('static', filename='img/upload.svg') }}">

                <br><br>
                <input accept="image/png, image/jpeg" class="pic"
                       id="pic" name="file"
                       type="file">

                <br><br>
                <button class="valid" onclick="save(this)" type="button" value="Enregistrer"> Valider</button>

        </form>


    </div>


</div>
<script>

function save(elem) {
    form=elem.parentNode;
  date=document.getElementById("dlc").value;
  title=document.getElementById("POST-title").value;
  name=document.getElementById("POST-name").value;
  if((dlc=="")||(name=="")||title==""){
    alert("Renseignement(s) manquant(s)")
    }
  else{
  r=confirm("Êtes vous sûr d'ajouter cet aliment ?");

        if(r){
        document.getElementById("load").style.visibility="visible";
        document.getElementById("window").style.opacity="0.2";

        form.submit();
        }
   }
}
</script>

{% endblock %}
</body>
</html>
